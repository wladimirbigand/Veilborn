<!doctype html>
<html lang="fr" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Veilborn • Accueil</title>
  <meta name="description" content="Entrez dans l'univers de Veilborn : histoire principale et téléchargement direct.">
  <meta name="author" content="Veilborn">
  <link rel="icon" href="/assets/favicon.ico">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{ --brand:#8e7fff; --brand-2:#36d1dc; }
    html,body{ height:100%; scroll-behavior:smooth; margin:0; }
    body{ display:flex; flex-direction:column; background-color:#000; color:#fff; }
    .btn-runes{ 
      background:linear-gradient(90deg,var(--brand),var(--brand-2)); 
      border:0; 
      color:#111; 
      font-weight:700;
      box-shadow:0 0 16px rgba(142,127,255,.25);
      transition:filter .2s ease, transform .2s ease;
    }
    .btn-runes:hover{ 
      filter:brightness(1.1); 
      transform:translateY(-2px);
      box-shadow:0 0 24px rgba(142,127,255,.45);
    }
    .hero{ position:relative; flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; overflow:hidden; min-height:100vh; }
    .hero::before{ content:""; position:absolute; inset:0; z-index:-3; background:url('/assets/hero-veilborn.jpg') center/cover no-repeat; filter:brightness(.6); }
    .hero::after{ content:""; position:absolute; inset:0; z-index:-2; background:linear-gradient(180deg, rgba(0,0,0,.4), rgba(0,0,0,.9)); }
    .hero-logo{ max-width:360px; width:40%; height:auto; animation:fadeIn 1.2s ease forwards; }
    .hero p.lead{ max-width:60ch; margin:1.2rem auto; opacity:.9; }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
    .runes-canvas{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; z-index:-1; }
    footer{ text-align:center; padding:1rem; font-size:.9rem; opacity:.75; border-top:1px solid rgba(255,255,255,.08); }
    .back-to-top{ position:fixed; right:16px; bottom:16px; z-index:1040; display:grid; place-items:center; width:44px; height:44px; border-radius:12px; background:#1a1f2b; color:#fff; text-decoration:none; border:1px solid rgba(255,255,255,.08); }
    .back-to-top:hover{ background:#202638; }
  </style>
</head>
<body>
  <header class="hero">
    <canvas id="runesCanvas" class="runes-canvas" aria-hidden="true"></canvas>
    <img src="Assets/VeilbornLogo.png" alt="Logo Veilborn" class="hero-logo">
    <p class="lead">Un monde de brumes, de runes et de serments anciens.</p>
    <button class="btn btn-runes btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#downloadModal">
      <i class="bi bi-download me-2"></i>Télécharger
    </button>
  </header>

  <footer>© <span id="year"></span> Veilborn. Tous droits réservés.</footer>

  <a href="#top" class="back-to-top" aria-label="Retour en haut" title="Retour en haut"><i class="bi bi-arrow-up-short fs-3"></i></a>

  <div class="modal fade" id="downloadModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-body">
        <div class="modal-header">
          <h5 class="modal-title"><i class="bi bi-shield-lock me-2"></i>Téléchargement protégé</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <form id="downloadForm" novalidate>
          <div class="modal-body">
            <label for="dlPassword" class="form-label">Clé d'accès</label>
            <input type="password" class="form-control" id="dlPassword" placeholder="Saisissez une clé d'accès" required>
            <div class="invalid-feedback">Veuillez saisir une clé valide.</div>
            <div id="dlError" class="text-danger small mt-2 d-none">Mot de passe incorrect.</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
            <button type="submit" class="btn btn-runes">Continuer</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const DOWNLOAD_URL="Assets/VeilBorn_V1.zip",REDIRECT_URL="merci.html",PASSWORD_HASH_HEX="e561182894f4b6daf90468eb7e75720972cb25013c89ff9bed838d955513c276";
    function toHex(b){return Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,'0')).join('');}
    async function sha256Hex(s){return toHex(await crypto.subtle.digest('SHA-256',new TextEncoder().encode(s)));}
    document.getElementById('year').textContent=new Date().getFullYear();
    const f=document.getElementById('downloadForm'),p=document.getElementById('dlPassword'),e=document.getElementById('dlError');
    f.addEventListener('submit',async ev=>{ev.preventDefault();if(!f.checkValidity()){f.classList.add('was-validated');return;}
      e.classList.add('d-none');const h=await sha256Hex(p.value);
      if(h===PASSWORD_HASH_HEX.toLowerCase()){window.location.href=DOWNLOAD_URL;setTimeout(()=>window.location.href=REDIRECT_URL,2000);}
      else{e.classList.remove('d-none');p.select();}});
  </script>

  <script>
    const RUNES_CONFIG={densityDesktop:40,densityMobile:18,minSize:16,maxSize:42,minSpeed:0.08,maxSpeed:0.3,rotationSpeed:0.004,alphaMin:0.25,alphaMax:0.8,colors:['#8e7fff','#36d1dc'],fontFamily:"'Noto Sans Runic','Segoe UI Symbol','Inter',system-ui,sans-serif",glyphs:"ᚠᚢᚦᚨᚱᚲᚷᚺᚾᛁᛃᛇᛈᛉᛊᛏᛒᛖᛗᛚᛜᛞᛟᛝ✧✦✩✪☽☾"};
    (function(){
      const pref=window.matchMedia('(prefers-reduced-motion: reduce)').matches,hero=document.querySelector('.hero'),c=document.getElementById('runesCanvas');
      if(!hero||!c)return; const ctx=c.getContext('2d');let dpr=Math.min(2,window.devicePixelRatio||1),W=0,H=0,R=[],id=null;
      function rnd(a,b){return a+Math.random()*(b-a);}function choice(a){return a[(Math.random()*a.length)|0];}
      function spawn(){const m=W<768,cnt=m?RUNES_CONFIG.densityMobile:RUNES_CONFIG.densityDesktop;R=[];
        for(let i=0;i<cnt;i++){const s=rnd(RUNES_CONFIG.minSize,RUNES_CONFIG.maxSize),sp=rnd(RUNES_CONFIG.minSpeed,RUNES_CONFIG.maxSpeed)*(s/RUNES_CONFIG.maxSize+.3);
          R.push({x:Math.random()*W,y:Math.random()*H,vy:sp*(Math.random()<.5?1:-1),vx:rnd(-.05,.05),r:rnd(-Math.PI,Math.PI),vr:(Math.random()<.5?-1:1)*RUNES_CONFIG.rotationSpeed*(.6+Math.random()*.8),s,alpha:rnd(RUNES_CONFIG.alphaMin,RUNES_CONFIG.alphaMax),aP:rnd(.003,.01)*(Math.random()<.5?1:-1),g:choice(RUNES_CONFIG.glyphs),col:choice(RUNES_CONFIG.colors)})}}
      function resize(){const r=hero.getBoundingClientRect();W=r.width;H=r.height;c.width=W*dpr;c.height=H*dpr;c.style.width=W+'px';c.style.height=H+'px';ctx.setTransform(dpr,0,0,dpr,0,0);spawn();draw();}
      function draw(){ctx.clearRect(0,0,W,H);for(const ru of R){ru.x+=ru.vx;ru.y+=ru.vy;ru.r+=ru.vr;ru.alpha+=ru.aP;if(ru.alpha>RUNES_CONFIG.alphaMax||ru.alpha<RUNES_CONFIG.alphaMin){ru.aP*=-1;}
        if(ru.x<-50)ru.x=W+50;if(ru.x>W+50)ru.x=-50;if(ru.y<-50)ru.y=H+50;if(ru.y>H+50)ru.y=-50;
        ctx.save();ctx.translate(ru.x,ru.y);ctx.rotate(ru.r);ctx.font=`${ru.s}px ${RUNES_CONFIG.fontFamily}`;ctx.textAlign='center';ctx.textBaseline='middle';
        ctx.globalAlpha=Math.max(0,ru.alpha-.15);ctx.shadowColor=ru.col;ctx.shadowBlur=Math.max(6,ru.s*.4);ctx.fillStyle=ru.col;ctx.fillText(ru.g,0,0);
        ctx.shadowBlur=0;ctx.globalAlpha=ru.alpha;ctx.fillText(ru.g,0,0);ctx.restore();}
        if(!pref)id=requestAnimationFrame(draw);}
      if(pref){resize();}else{const ro=new ResizeObserver(resize);ro.observe(hero);resize();id=requestAnimationFrame(draw);
        window.addEventListener('visibilitychange',()=>{if(document.hidden&&id){cancelAnimationFrame(id);id=null;}else if(!document.hidden&&!id){id=requestAnimationFrame(draw);}});}
    })();
  </script>
</body>
</html>
